var indexOf=require("indexof"),Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)},Script=exports.Script=function(e){return this instanceof Script?void(this.code=e):new Script(e)};Script.prototype.runInNewContext=function(e){e||(e={});var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow;forEach(Object_keys(e),function(t){r[t]=e[t]}),!r.eval&&r.execScript&&r.execScript("null");var n=Object_keys(r),i=r.eval(this.code);return forEach(Object_keys(r),function(t){(t in e||-1===indexOf(n,t))&&(e[t]=r[t])}),document.body.removeChild(t),i},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInContext=function(e){return this.runInNewContext(e)},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var r=Script(t);return r[e].apply(r,[].slice.call(arguments,1))}}),exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t={};return"object"==typeof e&&forEach(Object_keys(e),function(r){t[r]=e[r]}),t};