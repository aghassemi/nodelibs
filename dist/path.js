// Copyright Joyent, Inc. and other Node contributors.
function normalizeArray(t,e){for(var r=0,s=t.length-1;s>=0;s--){var n=t[s];"."===n?t.splice(s,1):".."===n?(t.splice(s,1),r++):r&&(t.splice(s,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function filter(t,e){if(t.filter)return t.filter(e);for(var r=[],s=0;s<t.length;s++)e(t[s],s,t)&&r.push(t[s]);return r}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(t){return splitPathRe.exec(t).slice(1)};exports.resolve=function(){for(var t="",e=!1,r=arguments.length-1;r>=-1&&!e;r--){var s=r>=0?arguments[r]:process.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,e="/"===s.charAt(0))}return t=normalizeArray(filter(t.split("/"),function(t){return!!t}),!e).join("/"),(e?"/":"")+t||"."},exports.normalize=function(t){var e=exports.isAbsolute(t),r="/"===substr(t,-1);return t=normalizeArray(filter(t.split("/"),function(t){return!!t}),!e).join("/"),t||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t},exports.isAbsolute=function(t){return"/"===t.charAt(0)},exports.join=function(){var t=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(t,function(t){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},exports.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=exports.resolve(t).substr(1),e=exports.resolve(e).substr(1);for(var s=r(t.split("/")),n=r(e.split("/")),i=Math.min(s.length,n.length),E=i,o=0;i>o;o++)if(s[o]!==n[o]){E=o;break}for(var S=[],o=E;o<s.length;o++)S.push("..");return S=S.concat(n.slice(E)),S.join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(t){var e=splitPath(t),r=e[0],s=e[1];return r||s?(s&&(s=s.substr(0,s.length-1)),r+s):"."},exports.basename=function(t,e){var r=splitPath(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},exports.extname=function(t){return splitPath(t)[3]};var substr="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return 0>e&&(e=t.length+e),t.substr(e,r)};