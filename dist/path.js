// Copyright Joyent, Inc. and other Node contributors.
function normalizeArray(t,e){for(var r=0,n=t.length-1;n>=0;n--){var s=t[n];"."===s?t.splice(n,1):".."===s?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function filter(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(t){return splitPathRe.exec(t).slice(1)};exports.resolve=function(){for(var t="",e=!1,r=arguments.length-1;r>=-1&&!e;r--){var n=r>=0?arguments[r]:process.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(t=n+"/"+t,e="/"===n.charAt(0))}return t=normalizeArray(filter(t.split("/"),function(t){return!!t}),!e).join("/"),(e?"/":"")+t||"."},exports.normalize=function(t){var e=exports.isAbsolute(t),r="/"===substr(t,-1);return t=normalizeArray(filter(t.split("/"),function(t){return!!t}),!e).join("/"),t||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t},exports.isAbsolute=function(t){return"/"===t.charAt(0)},exports.join=function(){var t=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(t,function(t){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},exports.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=exports.resolve(t).substr(1),e=exports.resolve(e).substr(1);for(var n=r(t.split("/")),s=r(e.split("/")),o=Math.min(n.length,s.length),i=o,E=0;o>E;E++)if(n[E]!==s[E]){i=E;break}for(var S=[],E=i;E<n.length;E++)S.push("..");return S=S.concat(s.slice(i)),S.join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(t){var e=splitPath(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},exports.basename=function(t,e){var r=splitPath(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},exports.extname=function(t){return splitPath(t)[3]};var substr="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return 0>e&&(e=t.length+e),t.substr(e,r)};